"0","```r
library(leaflet)
##------------------data.frame-------------------------------------------------------------
dd_leaflet <- allrank %>% 
  select(SA2, id, a.shops:a.work, oldrank, newrank) %>% 
  rename(SA2_NAME16 = SA2) %>% 
  rename(a.supermarket = a.shops) %>% 
  rename(live = oldrank, combined = newrank)
##------------------setup colors and labels-------------------------------------------------------------
SYD_data_raw <- SYD@data
# SYD@data <- SYD_data_raw
SYD$combined <- dd_leaflet$combined[.match(SYD$SA2_NAME16, dd_leaflet$SA2_NAME16)]
SYD$a.work <- dd_leaflet$a.work[.match(SYD$SA2_NAME16, dd_leaflet$SA2_NAME16)]
SYD$a.supermarket <- dd_leaflet$a.supermarket[.match(SYD$SA2_NAME16, dd_leaflet$SA2_NAME16)]
SYD$a.schools <- dd_leaflet$a.schools[.match(SYD$SA2_NAME16, dd_leaflet$SA2_NAME16)]
SYD$a.hospitals <- dd_leaflet$a.hospitals[.match(SYD$SA2_NAME16, dd_leaflet$SA2_NAME16)]
SYD$a.transit <- dd_leaflet$a.transit[.match(SYD$SA2_NAME16, dd_leaflet$SA2_NAME16)]
SYD$live <- dd_leaflet$live[.match(SYD$SA2_NAME16, dd_leaflet$SA2_NAME16)]
pal.combined <- colorNumeric(
  palette = colorRampPalette(c(DC[c(3,4,2,5,6)], \"orange\", \"red\"))(10),
  domain = SYD$combined, 
  na.color = \"white\"
)
labels.combined <- sprintf(
  \"<strong>%s</strong><br/>Combined: %g<br/>Work: %g<br/>Supermarkets: %g<br/>Schools: %g<br/>Hospitals: %g<br/>Transit: %g<br/>Live: %g<br/>\",
  SYD$SA2_NAME16, SYD$combined, 
  SYD$a.work, SYD$a.supermarket, SYD$a.schools, SYD$a.hospitals, SYD$a.transit, SYD$live) %>%
  lapply(htmltools::HTML)
##------------------leaflet map -------------------------------------------------------------
SYD %>%
  leaflet(width = 800, height = 550) %>% 
  setView(151.0093,-33.868, zoom = 10) %>% 
  # addTiles() %>%
  addProviderTiles(\"Stamen.TonerLite\") %>% 
  
  addPolygons(stroke = T, smoothFactor = 0.2, fillOpacity = 0.7,
              fillColor = ~pal.combined(combined), group = \"Combined\", 
              weight = .8,
              color = \"white\",
              dashArray = \"1\",
              highlight = highlightOptions(
                weight = 3,
                color = \"white\",
                dashArray = \"\",
                fillOpacity = 1,
                bringToFront = TRUE),
              label = labels.combined,
              labelOptions = labelOptions(
                style = list(\"font-weight\" = \"normal\", padding = \"3px 8px\"),
                textsize = \"15px\",
                direction = \"auto\")) %>% 
  addLegend(\"bottomright\", pal = pal.combined, values = ~combined, 
             title = \"Rank\", className=\"legendbox\",
             # labFormat = labelFormat(prefix = \"$\"),
             opacity = 1
  )
```"
